
### Content

---

## 매일 메일 질문 답변하기

> 💡 ****자바스크립트 Promise에 대해서 아는 대로 설명해주세요.****

비동기 작업을 관리하고, 해당 작업의 성공 또는 실패 결과를 나중에 사용할 수 있도록 하는 객체로 비동기 처리를 콜백 함수로 처리할 때 생기는 “콜백 지옥”에서 벗어나 가독성을 높여 코드의 흐름을 명확하게 관리할 수 있도록 도와준다.


**Promise 상태 **

1. **초기 상태 (Pending)**

1. **성공 (Fulfilled)**

1. **실패 (Rejected)**


Promise 객체는 비동기 작업을 수행할 함수를 인자로 받아서 실행하는데 이 함수는 resolve()와 reject() 콜백을 받는다.

> resolve() → Promise를 fulfilled 상태로 전환 시킴
reject() → Promise를 rejected 상태로 전환 시킴


Pending 상태에서 상태가 전환되면 이후에는 다른 상태로 바뀌지 않고, 그 결과 값을 통해 작업의 성공 여부를 파악할 수 있다.


하지만 여러 Promise가 중첩되거나 서로 다른 비동기 흐름에서 에러가 발생할 경우 복잡도가 증가할 수 있으며, 콜백 지옥을 어느 정도는 완화하나 완전히 해결할 수 있는 해결책은 아니다.

> 💡 ****DB Replication에 대해서 설명해주세요.****

DB의 고가용성과 데이터 안정성을 보장하기 위해 활용되는 기술이다.


Replication은 서버에서 발생하는 모든 데이터 변경 사항을 replica 서버로 복제하여 두 서버 간의 데이터 일관성을 유지하는 매커니즘이다.

→ 바이너리 로그를 기반으로 이루어지며 바이너리 로그는 서버에서 실행된 모든 데이터 변경 쿼리를 기록하는 역할을 한다.


바이너리 로그를 저장하는 방식은 3가지가 있는데, 다음과 같다.

### Row

데이터베이스의 각 행별로 변경된 내용을 정확히 기록한다.

→ 데이터 일관성을 매우 높게 유지할 수 있지만, 모든 변경 사항을 기록하기에 저장 공간에 부담 있음

### Statement

데이터 변경을 일으킨 SQL문 자체를 바이너리 로그에 기록하는 방식

→ 로그 파일의 크기를 줄일 수 있지만, 실행할 때마다 다른 값을 반환하는 함수와 같이 비확정적 SQL 쿼리일 경우 replica 서버와 기존 서버의 결과가 다를 수 있음 (데이터 불일치 문제)

### Mixed

상황에 따라 row 기반과 statement 기반을 혼합하여 로그를 기록 (MySQL)

→ 비확정적 SQL이 아니면 statement, 비확정적 SQL일 경우 row 방식 사용
(구현이 복잡할 수 있음)



각 로그 저장 방식에 따라 바이너리 로그를 기록하면, replica 서버의 IO Thread가 바이너리 로그를 읽어와서 replica 서버의 relay log로 전송한다.

→ relay log는 replica 서버에서 기존 서버의 바이너리 로그를 저장하는 임시 저장소 역할로 이 로그들을 기반으로 replica 서버의 SQL 스레드가 실제 데이터베이스에 변경 사항을 적용한다.


위의 과정은 약 100밀리초 이내에 데이터 동기화가 완료되므로 원본 서버와 복제 서버 간의 데이터 일관성이 실시간에 가깝게 유지된다.


### **TIL**

---


> 💡 **TIL 작성**

