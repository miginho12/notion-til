
### Content

---

## 매일 메일 질문 답변하기

> 💡 ****프로세스보다 스레드의 컨텍스트 스위칭이 더 빠른 이유는 무엇인가요?****

**컨텍스트 스위칭이란?**

CPU나 코어에서 실행 중이던 프로세스나 스레드가 다른 프로세스나 스레드로 교체되는 과정을 의미한다.

→ 컨텍스트란 프로세스나 스레드의 현재 상태를 의미한다.


**필요성**

멀티태스킹 시스템에서 여러 프로세스나 스레드가 동시에 실행되는 것 처럼 보이도록 CPU가 짧은 시간 작업 단위로 작업을 전환하며 여러 작업을 처리한다.

→ 사용자는 여러 작업이 동시에 진행되는 것처럼 인식하게 되며 자원을 효율적으로 활용할 수 있다.


컨텍스트 스위칭을 수행하는 주체는 운영체제의 커널로, 시스템 자원을 관리하고 프로세스 및 스레드의 상태를 조정하여 효율적인 작업 처리를 담당한다.


## 프로세스 스위칭 과정


1. **프로세스 컨텍스트 스위칭**

- **현재 프로세스의 상태 저장**
  - 실행중인 프로세스의 레지스터 상태와 메모리 정보를 저장


- **다음 프로세스의 상태 로드**
  - 스케줄러가 선택한 다음 실행할 프로세스의 저장된 상태를 로드


- **프로세스 전환**
  - CPU는 새로운 스레드의 실행을 시작


- **추가 메모리 처리**
  - 새로운 프로세스의 가상 메모리 주소 체계를 설정하고, MMU와 TLB를 업데이트



1. **스레드 컨텍스트 스위칭**

- **현재 스레드의 상태 저장**
  - 실행 중인 스레드의 레지스터 상태를 저장


- **다음 스레드의 상태 로드**
  - 동일한 프로세스 내에서 실행할 다음 스레드의 상태 로드


- **스레드 전환**
  - 새로운 스레드의 실행을 시작


- **메모리 처리 생략**
  - 동일한 프로세스 내 스레드 간 전환으로 메모리 관련 추가 처리 필요 없음



**공통점**

- **커널 모드에서 실행을 한다는 것**

- **CPU 레지스터의 상태를 저장하는 작업과 복원하는 작업을 거친다는 것이다.**


**차이점**

- **동일 프로세스 내의 스레드 간의 컨텍스트 스위칭은 메모리 관련 추가 작업이 필요 없으나, 다른 프로세스 간의 스레드 컨텍스트 스위칭의 경우 메모리 관련 작업이 필요**
  - → MMU는 새로운 프로세스의 주소 체계를 바라보도록 수정하고, TLB 캐시도 비워줘야 한다.

  - 


스레드 컨텍스트 스위칭이 메모리 관련 추가 작업을 수행하지 않으므로 프로세스 컨텍스트 스위칭보다 더욱 빠르다.


> 💡 ****useEffect를 이용하여 로딩 상태 관리하는 방법과 Suspense를 활용하는 방법에 대한 차이점을 설명해주세요.****

useEffect의 경우 데이터를 불러올 때 훅을 사용하고 별도의 상태 변수를 만들어서 조건에 따라 로딩 UI를 보여주는 방식으로 작동한다.


Suspense의 경우 로딩 중인 컴포넌트를 직접 렌더링하지 않고, fallback 속성으로 로딩 UI를 정의하게 한다. 데이터를 기다리는 동안 fallback으로 정의된 UI만 보여주고, 모두 준비되면 Suspense에 감싸진 컴포넌트를 자연스럽게 표시하는 방식으로 작동한다.

→ 선언적으로 로딩 상태를 관리할 수 있으므로 코드가 단순해지고, 유지보수가 쉬워진다.


하지만 Suspense 컴포넌트를 여럿 중첩하거나, 트리 구조로 사용할 경우, 각 Suspense가 독립적으로 로딩 상태를 관리하기 때문에 데이터 준비 시점이 달라질 수 있고, 그 결과 로딩 화면이 여러번 표시되거나 비일관적인 UI 경험이 발생할 수 있다.


Suspense는 Promise 기반의 비동기 작업만 지원하므로 fetch 요청에 바로 적용할 수 있는 것이 아닌, 추가적인 라이브러리를 사용하거나 Suspense와 호환되는 형태로 Promise를 관리해야 한다.


### **TIL**

---


> 💡 **TIL 작성**

